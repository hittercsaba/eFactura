
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘                    ğŸš¨ QUICK FIX: ANAF OAuth 401 Error                        â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ” PROBLEMA:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âœ… OAuth funcÈ›ioneazÄƒ (token obÈ›inut)
  âœ… Token valid (89 zile)
  âŒ API returneazÄƒ: 401 Unauthorized (error="invalid_token")


ğŸ¯ CAUZA (90%):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  AplicaÈ›ia din portal ANAF NU este pentru serviciul "E-Factura"
  (Token valid pentru alt serviciu, ex: e-Transport)


âš¡ FIX RAPID (10 minute):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£  VERIFICÄ‚ PORTAL ANAF
    
    ğŸŒ https://www.anaf.ro/InregOauth
    
    â–¶ Login cu certificatul
    â–¶ GÄƒseÈ™te aplicaÈ›ia cu Client ID:
      80ff76ff68508d6594d862aee5ee2edd0c58d20fd14f2969
    
    â–¶ VerificÄƒ: Serviciu = "E-Factura" ?
      
      âœ… DA â†’ Mergi la pasul 2ï¸âƒ£
      âŒ NU â†’ RECREAZÄ‚ APLICAÈšIA â¬‡ï¸
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RECREARE APLICAÈšIE:                                         â”‚
    â”‚                                                             â”‚
    â”‚ 1. CreeazÄƒ aplicaÈ›ie nouÄƒ                                  â”‚
    â”‚ 2. Denumire: eFactura_Gateway                              â”‚
    â”‚ 3. Serviciu: E-Factura  â† IMPORTANT!                       â”‚
    â”‚ 4. Callback: https://web.anaf-efactura.orb.local/anaf/...  â”‚
    â”‚ 5. SalveazÄƒ                                                 â”‚
    â”‚ 6. NOTEAZÄ‚: Client ID È™i Client Secret                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2ï¸âƒ£  VERIFICÄ‚ SPV (doar dacÄƒ pasul 1 = E-Factura)
    
    ğŸŒ https://www.anaf.ro/SpvInfoWebService/
    
    â–¶ Login cu ACELAÈ˜I certificat
    â–¶ SelecteazÄƒ CIF: 51331025
    â–¶ PoÈ›i vedea facturi?
      
      âœ… DA â†’ Problema e altundeva (contacteazÄƒ suport ANAF)
      âŒ NU â†’ SolicitÄƒ access pentru CIF

3ï¸âƒ£  ACTUALIZEAZÄ‚ APLICAÈšIA (dacÄƒ Client ID s-a schimbat)
    
    ğŸŒ http://localhost:8008/admin/anaf-oauth
    
    â–¶ Introdu noul Client ID
    â–¶ Introdu noul Client Secret
    â–¶ Click "Save Configuration"

4ï¸âƒ£  RE-AUTENTIFICÄ‚ (OBLIGATORIU dupÄƒ orice modificare)
    
    ğŸŒ http://localhost:8008/anaf/status
    
    â–¶ Click "Disconnect & Delete Token"
    â–¶ Click "Connect ANAF Account"
    â–¶ SelecteazÄƒ certificatul
    â–¶ AutorizeazÄƒ accesul

5ï¸âƒ£  TEST
    
    ğŸŒ http://localhost:8008/
    
    â–¶ SelecteazÄƒ compania: ProcessIQ Consulting SRL
    â–¶ Click "Sync Invoices"
    â–¶ âœ… Ar trebui sÄƒ aparÄƒ facturi!


ğŸ“‹ CHECKLIST:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  [ ] Am verificat portal ANAF
  [ ] AplicaÈ›ia are serviciul "E-Factura" selectat
  [ ] (sau) Am recreat aplicaÈ›ia cu "E-Factura"
  [ ] Am actualizat Client ID/Secret Ã®n aplicaÈ›ie
  [ ] Am È™ters token-ul vechi
  [ ] Am re-autentificat cu certificatul
  [ ] Am testat sync din dashboard
  [ ] âœ… Facturi sincronizate cu succes!


ğŸ”§ COMENZI UTILE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  # Diagnostic automat:
  ./RUN_DIAGNOSTIC.sh
  
  # Logs real-time:
  docker logs anaf_efactura-web-1 -f
  
  # Restart:
  docker-compose restart


ğŸ“š DOCUMENTAÈšIE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ğŸ“„ START_HERE.md              - Ghid rapid (citeÈ™te primul)
  ğŸ“„ DIAGNOSTIC_README.md       - Ghid complet
  ğŸ“„ REZUMAT_DIAGNOSTIC.md      - Analiza tehnicÄƒ
  ğŸ”§ RUN_DIAGNOSTIC.sh          - Script diagnostic


ğŸ“ SUPORT:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ğŸ“§ suport.efactura@anaf.ro
  ğŸ“ Template mesaj: vezi REZUMAT_DIAGNOSTIC.md


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘  ğŸ¯ ACÈšIUNE: VerificÄƒ portal ANAF â†’ https://www.anaf.ro/InregOauth          â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

